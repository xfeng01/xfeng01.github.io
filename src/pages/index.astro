---
import BasicLayout from '../layouts/BasicLayout.astro';
import { getEntry, getCollection } from 'astro:content';
import ProjectCard from '../components/ProjectCard.astro';

// Fetch content for the "About" section
const aboutEntry = await getEntry('about', 'main');
const { Content: AboutContent } = await aboutEntry.render();

// Fetch all project entries and sort by date (newest first)
const projects = (await getCollection('projects')).sort((a, b) => {
  return b.data.date.getTime() - a.data.date.getTime();
});
---

<BasicLayout>
	<AboutContent />

	<section class="mt-12">
		<h2 class="text-2xl font-bold mb-8 text-gray-900">Projects</h2>
		<div class="space-y-8">
			{projects.map(async (project) => {
				const { Content } = await project.render();
				return (
					<ProjectCard project={project}>
						<Content />
					</ProjectCard>
				)
			})}
		</div>
	</section>
</BasicLayout>


